<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gaze Data Heatmap</title>
  <!-- Heatmap.js -->
  <script src="https://cdn.jsdelivr.net/npm/heatmap.js"></script>
  <style>
    /* Container for the heatmap */
    #heatmapContainer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none; /* Allows clicks to pass through */
      z-index: 1000; /* Ensures the heatmap is on top */
    }
  </style>
</head>
<body>
  <h1>Gaze Data Heatmap</h1>
  <p>Below is the heatmap generated from the gaze data:</p>
  <!-- Button to Save Heatmap -->
  <button id="saveHeatmap" style="margin-top: 20px;">Save Heatmap as Image</button>


  <!-- Heatmap Container -->
  <div id="heatmapContainer"></div>

  <script>
    // Sample gaze data: Replace with your collected data
    const gazeData = [
    {x: 956.850104355818, y: 276.929372382264, time: '2024-12-13T02:02:59.810Z'},
{x: 1275.6796967840928, y: 636.5888263260576, time: '2024-12-13T02:03:01.103Z'},
{x: 1312.128129899895, y: 623.0265496308215, time: '2024-12-13T02:03:03.114Z'},
{x: 1029.5344430802875, y: 327.1768817100466, time: '2024-12-13T02:03:08.882Z'},
{x: 784.2004086382121, y: 421.2433361445953, time: '2024-12-13T02:03:10.993Z'},
{x: 947.9993643823897, y: 431.711427844822, time: '2024-12-13T02:03:15.180Z'},
{x: 472.5551612574063, y: 396.6738527629413, time: '2024-12-13T02:03:18.250Z'},
{x: 611.6084332952283, y: 364.7846146759259, time: '2024-12-13T02:03:21.367Z'},
{x: 666.5647185159565, y: 359.7467670998328, time: '2024-12-13T02:03:27.329Z'},
{x: 946.8911922094692, y: 354.8727006648304, time: '2024-12-13T02:03:29.451Z'},
{x: 659.233621052489, y: 463.700416630616, time: '2024-12-13T02:03:31.758Z'},
{x: 891.5208613930051, y: 456.7402086458925, time: '2024-12-13T02:03:34.882Z'},
{x: 1420.3060952661433, y: 616.6940610374976, time: '2024-12-13T02:03:41.843Z'},
{x: 892.5775120883252, y: 293.5897724722152, time: '2024-12-13T02:03:48.347Z'},
{x: 967.2776394724823, y: 570.9113902282826, time: '2024-12-13T02:03:59.638Z'},
{x: 780.6933736625643, y: 444.9736482585033, time: '2024-12-13T02:04:14.279Z'},
{x: 1211.9126332818225, y: 135.28768956223018, time: '2024-12-13T02:04:44.302Z'},
{x: 1857.7951362156293, y: 400.92286642569195, time: '2024-12-13T02:20:30.409Z'},
{x: 1429.6571192830165, y: 586.1048390848013, time: '2024-12-13T02:20:30.677Z'},
{x: 873.3246321748321, y: 386.8230622951319, time: '2024-12-13T02:20:31.385Z'},
{x: 886.4262735726599, y: 418.6059597755455, time: '2024-12-13T02:20:32.300Z'},
{x: 1063.2858573112687, y: 457.45576093022174, time: '2024-12-13T02:20:33.250Z'},
{x: 902.891977813318, y: 343.128929445769, time: '2024-12-13T02:20:34.309Z'},
{x: 842.896674566032, y: 456.803570121842, time: '2024-12-13T02:20:35.755Z'},
{x: 779.4728911055155, y: 378.0367057370002, time: '2024-12-13T02:20:37.417Z'},
{x: 979.3605612617484, y: 411.3432719634874, time: '2024-12-13T02:20:38.788Z'},
{x: 898.3618681375705, y: 310.5325634075748, time: '2024-12-13T02:20:41.042Z'},
{x: 926.543220665016, y: 333.555194212526, time: '2024-12-13T02:20:43.197Z'},
{x: 1017.6252348785472, y: 424.96677119741753, time: '2024-12-13T02:20:45.382Z'},
{x: 883.7143080925808, y: 367.3947078703857, time: '2024-12-13T02:20:48.303Z'},
{x: 922.7483500802921, y: 581.6554338344308, time: '2024-12-13T02:20:51.208Z'},
{x: 606.386293775858, y: 436.113441206608, time: '2024-12-13T02:20:54.217Z'},
{x: 265.70914601784534, y: 335.7733790921061, time: '2024-12-13T02:20:57.744Z'},
{x: 1106.3518491890695, y: 247.5710484219636, time: '2024-12-13T02:21:03.515Z'},
{x: 1335.9564162890854, y: 725.7823840545409, time: '2024-12-13T02:21:08.644Z'},
{x: 51.999592867413064, y: 731.2581570740676, time: '2024-12-13T02:21:16.902Z'},
{x: 170.612082426128, y: 911.739437192128, time: '2024-12-13T02:21:24.080Z'},
{x: 672.3742409810238, y: 329.3387751508236, time: '2024-12-13T02:21:33.955Z'},
{x: 1605.7481026264252, y: 709.888123314372, time: '2024-12-13T02:21:50.707Z'},
{x: 1135.861105487356, y: 330.8643241629635, time: '2024-12-13T02:22:00.282Z'},
{x: 762.8161399853245, y: 488.0696193313294, time: '2024-12-13T02:22:09.568Z'},
{x: 714.0286357716408, y: 418.4195870860100, time: '2024-12-13T02:22:19.573Z'},
{x: 932.7813597047448, y: 227.5434733001457, time: '2024-12-13T02:22:40.302Z'},
{x: 541.5274976500657, y: 456.2829275539503, time: '2024-12-13T02:25:20.741Z'},
{x: 751.0702079117277, y: 233.6073654671799, time: '2024-12-13T02:25:21.068Z'},
{x: 745.6563284053569, y: 255.2508208662731, time: '2024-12-13T02:25:21.117Z'},
{x: 734.7337821585846, y: 273.2113656330684, time: '2024-12-13T02:25:21.167Z'},
{x: 747.732769898839, y: 266.675971021338, time: '2024-12-13T02:25:21.240Z'},
{x: 729.0783600664614, y: 270.2465246413910, time: '2024-12-13T02:25:21.447Z'},
{x: 739.3284061177442, y: 255.1955085974248, time: '2024-12-13T02:25:21.597Z'},
{x: 740.9558070906305, y: 249.6974355081459, time: '2024-12-13T02:25:21.746Z'},
{x: 737.502133060122, y: 256.625271421020, time: '2024-12-13T02:25:21.822Z'},
{x: 728.9817532665952, y: 258.913794605528, time: '2024-12-13T02:25:21.890Z'},
{x: 722.0550377787213, y: 275.6211167203832, time: '2024-12-13T02:25:21.956Z'},
{x: 725.5571277864722, y: 274.4139544150592, time: '2024-12-13T02:25:22.023Z'},
{x: 726.2342121182686, y: 274.1646695876914, time: '2024-12-13T02:25:22.089Z'},
{x: 725.5239193533633, y: 263.3366178625202, time: '2024-12-13T02:25:22.157Z'},
{x: 718.8676247585028, y: 265.5063881116014, time: '2024-12-13T02:25:22.220Z'},
{x: 713.9762138082689, y: 272.2670773802620, time: '2024-12-13T02:25:22.286Z'},
{x: 708.619907024883, y: 270.226352019298, time: '2024-12-13T02:25:22.350Z'},
{x: 703.8305981413114, y: 270.2797451390359, time: '2024-12-13T02:25:22.415Z'},
{x: 709.6867545316741, y: 251.6694216462055, time: '2024-12-13T02:25:22.484Z'},
{x: 725.5766351490755, y: 242.7203125754642, time: '2024-12-13T02:25:22.546Z'},
{x: 729.9305931235947, y: 229.9290498725830, time: '2024-12-13T02:25:22.647Z'},
{x: 722.2377946629712, y: 225.3688307870898, time: '2024-12-13T02:25:22.747Z'},
{x: 716.4831055567157, y: 225.7521167961855, time: '2024-12-13T02:25:22.847Z'},
{x: 704.4987413501099, y: 322.1476802932869, time: '2024-12-13T02:25:22.953Z'},
{x: 654.7923100914303, y: 389.0454919884701, time: '2024-12-13T02:25:23.042Z'},
{x: 316.12588056147956, y: 468.2458313253842, time: '2024-12-13T02:25:23.240Z'},
{x: 758.9408860787813, y: 460.2645944258501, time: '2024-12-13T02:25:24.248Z'},
{x: 759.8248415179356, y: 448.1303143275997, time: '2024-12-13T02:25:24.949Z'},
{x: 767.6626814083689, y: 445.6962732333299, time: '2024-12-13T02:25:25.405Z'},
{x: 772.8912156336088, y: 431.3065287699595, time: '2024-12-13T02:25:25.472Z'},
{x: 767.8012493917115, y: 428.0901425597632, time: '2024-12-13T02:25:25.540Z'},
{x: 762.4785545975327, y: 429.6252604736733, time: '2024-12-13T02:25:25.607Z'},
{x: 760.8482744008259, y: 416.4829011889542, time: '2024-12-13T02:25:25.668Z'},
{x: 761.3282340172004, y: 414.3960362288343, time: '2024-12-13T02:25:25.734Z'},
{x: 770.1786974135231, y: 441.1221487557589, time: '2024-12-13T02:25:25.824Z'},
{x: 772.8120601964597, y: 465.2018519970568, time: '2024-12-13T02:25:25.914Z'},
{x: 771.5327841546756, y: 460.7180252667775, time: '2024-12-13T02:25:25.997Z'},
{x: 759.3126695224028, y: 460.7678659106033, time: '2024-12-13T02:25:26.080Z'},
{x: 751.5909808482621, y: 451.3718286884703, time: '2024-12-13T02:25:26.165Z'},
{x: 748.9030383314375, y: 446.1909813684665, time: '2024-12-13T02:25:26.265Z'},
{x: 748.7095012722889, y: 453.4561060549465, time: '2024-12-13T02:25:26.369Z'},
{x: 751.1396216533636, y: 467.0258614022028, time: '2024-12-13T02:25:26.463Z'},
{x: 595.3494201371839, y: 429.9909537486694, time: '2024-12-13T02:25:26.665Z'},
{x: 707.2398978345161, y: 420.1032705483187, time: '2024-12-13T02:25:27.086Z'},
{x: 1206.8093335395886, y: 284.8815496006895, time: '2024-12-13T02:25:27.394Z'},
{x: 535.3754620586698, y: 505.8986900361211, time: '2024-12-13T02:25:27.865Z'},
{x: 590.9174534878899, y: 337.8308704364836, time: '2024-12-13T02:25:28.873Z'},
{x: 136.23246749817892, y: 484.39854470012335, time: '2024-12-13T02:25:29.425Z'},
{x: 118.92917972771609, y: 487.5391625603732, time: '2024-12-13T02:25:29.832Z'},
{x: 149.6777702443087, y: 481.2552542747763, time: '2024-12-13T02:25:30.037Z'},
{x: 110.82630273046694, y: 509.4430001697873, time: '2024-12-13T02:25:31.391Z'},
{x: 451.34968703167215, y: 379.65344810592984, time: '2024-12-13T02:25:31.615Z'},
{x: 995.0746597713272, y: 154.4935263428939, time: '2024-12-13T02:25:31.889Z'},
{x: 739.4620195476297, y: 381.6464159332601, time: '2024-12-13T02:25:32.499Z'},
{x: 381.9427347498998, y: 287.2535584337806, time: '2024-12-13T02:25:32.930Z'},
{x: 500.5217013860413, y: 268.0863831623124, time: '2024-12-13T02:25:33.720Z'},
{x: 821.8006098835504, y: 262.2926654036215, time: '2024-12-13T02:25:34.420Z'},
{x: 793.5253073922837, y: 347.6169281413011, time: '2024-12-13T02:25:34.729Z'},
{x: 1123.0334574536362, y: 236.7961028570522, time: '2024-12-13T02:25:35.319Z'},
{x: 964.5029490786022, y: 311.2649829870557, time: '2024-12-13T02:25:36.138Z'},
{x: 296.6076544046761, y: 278.5200749960586, time: '2024-12-13T02:25:36.891Z'},
{x: 462.59158893127426, y: 294.6102008859708, time: '2024-12-13T02:25:37.855Z'},
{x: 451.68455756984696, y: 349.2507863048006, time: '2024-12-13T02:25:38.920Z'},
{x: 418.08027692108396, y: 348.84011149919655, time: '2024-12-13T02:25:39.016Z'},
{x: 434.4639892884177, y: 343.7417550293918, time: '2024-12-13T02:25:39.118Z'},
{x: 470.33095324873096, y: 335.200653795186, time: '2024-12-13T02:25:39.218Z'},
{x: 510.19916746076024, y: 328.3025929335564, time: '2024-12-13T02:25:39.318Z'},
{x: 543.9729420986274, y: 326.437721264247, time: '2024-12-13T02:25:39.416Z'},
{x: 546.1101968879063, y: 331.8486365893151, time: '2024-12-13T02:25:39.513Z'},
{x: 541.3994401846603, y: 331.9656825458440, time: '2024-12-13T02:25:39.585Z'},
{x: 505.67561799433696, y: 341.0749026357005, time: '2024-12-13T02:25:39.657Z'},
{x: 408.456469923204, y: 376.257441597354, time: '2024-12-13T02:25:39.863Z'},
{x: 377.35194833484525, y: 389.856344974891, time: '2024-12-13T02:25:39.921Z'},
{x: 338.27942949381264, y: 398.76592194378543, time: '2024-12-13T02:25:40.013Z'},
{x: 365.92618498369416, y: 385.61574672956397, time: '2024-12-13T02:25:40.145Z'},
{x: 418.0189166263385, y: 372.0782415558767, time: '2024-12-13T02:25:40.223Z'},
{x: 439.00601408545486, y: 367.7030497009935, time: '2024-12-13T02:25:40.280Z'},
{x: 459.8239193637168, y: 364.3141608830103, time: '2024-12-13T02:25:40.353Z'},
{x: 473.1469672751319, y: 359.5331409659504, time: '2024-12-13T02:25:40.413Z'},
{x: 474.5402724347298, y: 354.5462333886456, time: '2024-12-13T02:25:40.484Z'},
{x: 483.6990767089194, y: 344.3579094209, time: '2024-12-13T02:25:40.704Z'},
{x: 449.3991492270852, y: 361.7688029711248, time: '2024-12-13T02:25:40.866Z'},
{x: 513.4657110765489, y: 337.7731865644159, time: '2024-12-13T02:25:41.102Z'},
{x: 553.9320816213447, y: 332.9634772967711, time: '2024-12-13T02:25:41.199Z'},
{x: 533.9359727830987, y: 327.7606570638, time: '2024-12-13T02:25:41.303Z'},
{x: 632.5300645767558, y: 423.5577894681992, time: '2024-12-13T02:25:41.571Z'},
{x: 619.979269661908, y: 435.051298560660, time: '2024-12-13T02:25:41.663Z'},
{x: 580.7867896811342, y: 418.9976974742932, time: '2024-12-13T02:25:42.002Z'},
{x: 609.1101895314118, y: 410.546699454376, time: '2024-12-13T02:25:42.086Z'},
{x: 633.6426462313561, y: 404.2127367295740, time: '2024-12-13T02:25:42.134Z'},
{x: 701.6205618800009, y: 411.5345105941188, time: '2024-12-13T02:25:42.287Z'},
{x: 667.5452745790354, y: 422.7986526543137, time: '2024-12-13T02:25:42.535Z'},
{x: 697.5214302283971, y: 423.984764709928, time: '2024-12-13T02:25:42.750Z'},
{x: 740.4248176333219, y: 416.5101346247546, time: '2024-12-13T02:25:42.880Z'},
{x: 774.8358752333786, y: 418.4893805847362, time: '2024-12-13T02:25:42.967Z'},
{x: 786.7830319515909, y: 416.4712872511231, time: '2024-12-13T02:25:43.016Z'},
{x: 701.8532298342707, y: 434.1838477437931, time: '2024-12-13T02:25:43.177Z'},
{x: 700.4328064936923, y: 388.8976462726201, time: '2024-12-13T02:25:43.294Z'},
{x: 883.5802070981484, y: 432.9465871396948, time: '2024-12-13T02:25:43.737Z'},
{x: 1118.4690235975704, y: 473.8215430722472, time: '2024-12-13T02:25:44.511Z'},
{x: 1093.6213374750566, y: 487.3245816037491, time: '2024-12-13T02:25:44.848Z'},
{x: 956.879838443289, y: 530.087169551306, time: '2024-12-13T02:25:45.331Z'},
{x: 1015.1079592323935, y: 512.1563709501229, time: '2024-12-13T02:25:45.834Z'},
{x: 1075.268673293807, y: 468.4600421216408, time: '2024-12-13T02:25:46.037Z'},
{x: 1005.7508868802712, y: 498.43465149102417, time: '2024-12-13T02:25:46.209Z'},
{x: 890.0454623422352, y: 447.8151913279422, time: '2024-12-13T02:25:46.327Z'},
{x: 886.8623702266157, y: 405.9305943736739, time: '2024-12-13T02:25:46.692Z'},
{x: 853.4049789269126, y: 410.4211829056293, time: '2024-12-13T02:25:46.821Z'},
{x: 876.986717928083, y: 347.694914742836, time: '2024-12-13T02:25:46.906Z'},
{x: 870.5307465722642, y: 349.4505429899128, time: '2024-12-13T02:25:46.993Z'},
{x: 897.9633852357565, y: 354.3167703640303, time: '2024-12-13T02:25:47.124Z'},
{x: 946.4355565360569, y: 310.7409886664053, time: '2024-12-13T02:25:47.386Z'},
{x: 967.2933433294916, y: 267.972172113688, time: '2024-12-13T02:25:47.565Z'},
{x: 913.0120836808959, y: 285.7309876193482, time: '2024-12-13T02:25:47.726Z'},
{x: 852.6865925212863, y: 439.1554344790446, time: '2024-12-13T02:25:48.028Z'},
{x: 828.6326040646899, y: 520.3433195334487, time: '2024-12-13T02:25:48.209Z'},
{x: 790.7243712597365, y: 515.367952871695, time: '2024-12-13T02:25:48.746Z'},
{x: 801.5912141283118, y: 528.0413820058767, time: '2024-12-13T02:25:48.851Z'},
{x: 826.6946956866336, y: 518.3038093699093, time: '2024-12-13T02:25:48.908Z'},
{x: 846.7349615411626, y: 502.0799804119388, time: '2024-12-13T02:25:49.007Z'},
{x: 872.01910180302, y: 519.90685915006, time: '2024-12-13T02:25:49.199Z'},
{x: 869.544328868337, y: 544.181876801872, time: '2024-12-13T02:25:49.371Z'},
{x: 891.2577870271616, y: 485.6686253541094, time: '2024-12-13T02:25:49.943Z'},
{x: 902.9683389408062, y: 491.6283962208974, time: '2024-12-13T02:25:50.170Z'},
{x: 803.4268002790444, y: 475.9740061877676, time: '2024-12-13T02:25:50.499Z'},
{x: 830.0483169369613, y: 475.0666041835112, time: '2024-12-13T02:25:50.767Z'},
{x: 822.8546583935117, y: 469.3783637489291, time: '2024-12-13T02:25:51.030Z'},
{x: 854.4949884723189, y: 501.8261527196945, time: '2024-12-13T02:25:51.381Z'},
{x: 686.0294249654215, y: 466.6142172774632, time: '2024-12-13T02:25:54.044Z'},
{x: 659.6991590237577, y: 340.2094204023815, time: '2024-12-13T02:25:54.131Z'},
{x: 382.80494582827043, y: 425.7366934666844, time: '2024-12-13T02:26:05.628Z'},
{x: 849.1659080357688, y: 229.90453125359, time: '2024-12-13T02:26:06.828Z'},
{x: 765.1942249696554, y: 239.6916219282138, time: '2024-12-13T02:26:06.977Z'},
{x: 722.250428533812, y: 238.932176329652, time: '2024-12-13T02:26:07.455Z'},
{x: 751.3413681115811, y: 261.2585416596151, time: '2024-12-13T02:26:07.555Z'},
{x: 759.2751772489036, y: 266.2834399283065, time: '2024-12-13T02:26:07.656Z'},
{x: 755.1067787073215, y: 249.0068748206971, time: '2024-12-13T02:26:07.756Z'},
{x: 813.7800813849155, y: 268.3772052529705, time: '2024-12-13T02:26:07.854Z'},
{x: 819.3246283240097, y: 372.8708068799509, time: '2024-12-13T02:26:07.950Z'},
{x: 784.3932115599999, y: 322.1493621186054, time: '2024-12-13T02:26:08.058Z'},
{x: 764.7600823936808, y: 377.9880751789389, time: '2024-12-13T02:26:08.328Z'},
{x: 755.0978246721272, y: 409.6619433138883, time: '2024-12-13T02:26:08.448Z'},
{x: 772.5326082953649, y: 467.8621738028495, time: '2024-12-13T02:26:08.591Z'},
{x: 752.4211260899801, y: 488.3988055483292, time: '2024-12-13T02:26:08.935Z'},
{x: 709.6137050573985, y: 519.2710325668071, time: '2024-12-13T02:26:09.236Z'},
{x: 768.3289147923288, y: 509.2086890950953, time: '2024-12-13T02:26:09.459Z'},
{x: 816.3673438895231, y: 305.625859327827, time: '2024-12-13T02:26:49.213Z'},
{x: 798.3574184866286, y: 385.2364538649851, time: '2024-12-13T02:26:49.553Z'},
{x: 1327.6781197769762, y: 666.2629117399592, time: '2024-12-13T02:26:50.835Z'},
{x: 1232.2953417040817, y: 649.3949202904546, time: '2024-12-13T02:26:51.134Z'},
{x: 1343.5499480727935, y: 668.7551365256758, time: '2024-12-13T02:26:51.429Z'},
{x: 1376.1851213332461, y: 652.8492990290856, time: '2024-12-13T02:26:51.587Z'},
{x: 1369.8696694423131, y: 661.9897398712319, time: '2024-12-13T02:26:51.777Z'},
{x: 1378.0634212954308, y: 662.263919460017, time: '2024-12-13T02:26:52.121Z'},
{x: 1370.8955871250757, y: 646.893377505356, time: '2024-12-13T02:26:52.390Z'},
{x: 1395.672335077102, y: 641.9068166399775, time: '2024-12-13T02:26:52.587Z'},
{x: 1376.3190194323874, y: 620.9591346814628, time: '2024-12-13T02:26:52.685Z'},
{x: 1363.2802912886598, y: 600.442458023427, time: '2024-12-13T02:26:52.785Z'},
{x: 1348.5947065793082, y: 604.296836666297, time: '2024-12-13T02:26:52.885Z'},
{x: 1364.0195128652817, y: 650.0168180275514, time: '2024-12-13T02:26:53.051Z'},
{x: 1380.3096670930265, y: 640.3649054340714, time: '2024-12-13T02:26:53.178Z'},
{x: 1137.8287136164338, y: 645.3613573204309, time: '2024-12-13T02:26:53.475Z'},
{x: 1303.352186402133, y: 711.5684927665144, time: '2024-12-13T02:26:53.831Z'},
{x: 1366.60009070685, y: 640.810436373426, time: '2024-12-13T02:26:54.372Z'},
{x: 918.728084700655, y: 427.393849264662, time: '2024-12-13T02:26:59.921Z'},
{x: 842.7005513720408, y: 544.3639297842965, time: '2024-12-13T02:27:00.263Z'},
{x: 672.5564339363711, y: 662.7253842460618, time: '2024-12-13T02:27:00.438Z'},
{x: 818.0515479019225, y: 610.8311113703343, time: '2024-12-13T02:27:00.534Z'},
{x: 856.3757871838895, y: 566.2447144332975, time: '2024-12-13T02:27:00.633Z'},
{x: 865.9380694185962, y: 551.0967527546278, time: '2024-12-13T02:27:00.734Z'},
{x: 877.853809792923, y: 520.060996671377, time: '2024-12-13T02:27:00.833Z'},
{x: 888.644838824968, y: 498.753001406353, time: '2024-12-13T02:27:00.933Z'},
{x: 914.8496393760332, y: 497.1188420136562, time: '2024-12-13T02:27:01.034Z'},
{x: 868.0428135987993, y: 457.5376701101777, time: '2024-12-13T02:27:01.134Z'},
{x: 804.263191546451, y: 438.358384244686, time: '2024-12-13T02:27:01.238Z'},
{x: 773.8610952242709, y: 258.9104109032511, time: '2024-12-13T02:27:01.553Z'},
{x: 981.9737697797493, y: 193.1775853557867, time: '2024-12-13T02:27:02.225Z'},
{x: 426.23516031436384, y: 311.27727597446625, time: '2024-12-13T02:27:02.498Z'},
{x: 409.81492781846293, y: 346.62561899033705, time: '2024-12-13T02:27:02.668Z'},
{x: 475.59870370341406, y: 316.1287676246344, time: '2024-12-13T02:27:02.837Z'},
{x: 643.8345643482669, y: 140.4298986154226, time: '2024-12-13T02:27:03.077Z'},
{x: 737.5622789658559, y: 172.2248343312683, time: '2024-12-13T02:27:03.389Z'},
{x: 528.4804819294245, y: 96.09982557056873, time: '2024-12-13T02:27:03.800Z'},
{x: 767.0470343092991, y: 259.1451624811074, time: '2024-12-13T02:27:07.421Z'},
{x: 825.0340342364236, y: 263.6914171655878, time: '2024-12-13T02:27:11.882Z'},
    ];

    // Format gaze data for Heatmap.js
    const heatmapPoints = gazeData.map(point => ({
      x: Math.round(point.x), // X coordinate
      y: Math.round(point.y), // Y coordinate
      value: 1                // Intensity of each gaze point
    }));

    // Initialize Heatmap.js instance
    const heatmapInstance = h337.create({
      container: document.getElementById('heatmapContainer'), // The container for the heatmap
      radius: 50,          // Size of the heatmap blobs
      maxOpacity: 0.8,     // Max opacity of heatmap
      minOpacity: 0.1,     // Min opacity of heatmap
      blur: 0.9            // Blurriness of heatmap blobs
    });

    // Add the data to the heatmap
    heatmapInstance.setData({
      max: 10,       // Maximum intensity of heatmap points
      data: heatmapPoints
    });

    // Function to Save the Heatmap as an Image
    document.getElementById('saveHeatmap').addEventListener('click', () => {
      // Get the heatmap canvas element
      const canvas = document.querySelector('#heatmapContainer canvas');

      if (canvas) {
        // Convert canvas to a data URL (PNG format)
        const dataURL = canvas.toDataURL('image/png');

        // Create a link element for downloading
        const link = document.createElement('a');
        link.href = dataURL;
        link.download = 'heatmap.png'; // File name for the download
        link.click(); // Programmatically click the link to trigger the download
      } else {
        alert('Heatmap canvas not found!');
      }
    });

  </script>
</body>
</html>
